<html lang="en" manifest="cache.appcache">

<head>
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="xTicket">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <!--<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">-->

    <!--<META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">-->
    <title>xTicket</title>

    <!-- Bootstrap Core CSS -->
    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">-->
    <link rel="apple-touch-icon" href="gfx/ico.png">
    <link rel="apple-touch-startup-image" href="gfx/startup.png">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!--<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> -->
    <!-- Custom CSS -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    
</head>

<body>

<div style="height:75px;width=100%;background-color:#9B1D81">
    <div id="back" style="float:left">
        <img style="position:relative;width:30px;padding-top:95%;left:25%" src="gfx/back.png">
    </div>
    <div class="text-center" id="top" >One Way</div>
</div>
<!--<a style='display:block;width:100%'>-->
<div id="bigwrapper">
<div id="colors" class="container btn nopadding">
  <div id='left' class="col-xs-4 colorr nopadding" data-toggle="modal" data-target="#myModal" style="border-top-left-radius: 5px;border-bottom-left-radius: 5px;background-color:#6634B0"></div>
  <div id='middle' class="col-xs-4 colorr nopadding" data-toggle="modal" data-target="#myModal"  style="background-color:#D28037"></div>
  <div id='right' class="col-xs-4 colorr nopadding" data-toggle="modal" data-target="#myModal"  style="border-top-right-radius: 5px;border-bottom-right-radius: 5px;background-color:#403EF3"></div>
</div>

<div id="wrapper">
  <span id="MOVE"><strong><p class="text-center" style="" id="TIME"></p></strong></span>
</div>


<p class="text-center" style="font-size:8pt; position:relative; top:85%"><strong>Tap to reveal barcode</strong></p>
</div>
<!--</a>-->

<div id="down-btn" class="bottom"><img class="img-responsive" src="gfx/down.png" width = 35% style="position:relative;left:50%;top:5px;transform: translate(-50%, 0%);"></div>



<div class="container-fluid text-center" style="line-height:5px;padding-top:43px">
    <div class="row">
        <div class="col-xs-12 text-center">
            <div id="active" class="btn" style="font-style:bold;font-weight:700;font-size:11.5pt;width:99%;padding-left:0.5%;height:40px;background-color:#ED203D;color:white;line-height:25px;box-shadow: 0px 2px 0px #D3D3D3;"></div>
        </div>
    </div>
    <br>
    <br>
    <br>
    <div class="row">
        <div class="col-xs-12 text-center">
            <div class="btn" style="font-style:bold;font-weight:700;font-size:11.5pt;width:100%;height:40px;background-color:#FFFFFF;color:black;line-height:25px;box-shadow: 0px 2px 0px #D3D3D3;">One Way</div>
        </div>
    </div>
    <br>
    <br>
    <br>
    <div class="row">
        <div class="col-xs-12 text-center">
            <div id="zone" class="btn" style=";width:100%%;background-color:#FFFFFF;color:black;line-height:25px;box-shadow: 0px 2px 0px #D3D3D3;">
                <img style="pointer-events: none;" id="zoneimg" width=100% src="gfx/1.png">
            </div>
        </div>
    </div>
    <br>
    <br>
    <br>
    <br>
    <div class="row">
        <div class="col-xs-12 text-center">
            <div class="btn" style="width:100%;height:58px;background-color:#FFFFFF;color:black;line-height:25px;box-shadow: 0px 2px 0px #D3D3D3;">
                <div class=" btn" style="font-style:bold;font-weight:700;position:relative;left:-2.25%;top:4.5%;color:white;width:48%;height:40px;background-color:#9B1D81;line-height:27.5px">Actions</div>
             
                <div id="refresh" class="btn" style="font-style:bold;font-weight:700;position:relative;right:-2.25%;top:4.5%;color:white;width:48%;height:40px;background-color:#9B1D81;line-height:27.5px">Ticket Info</div>
            </div>
        </div>
    </div>

</div>
<br>


<!--<div id="myModal" class="modal">
  <span class="close">&times;</span>
  <div class="modal-content container">
    <div class="row">
      <div class="col-xs-4 l-col col-pck" style="background-color:red"></div>
      <div class="col-xs-4 m-col col-pck" style="background-color:red"></div>
      <div class="col-xs-4 r-col col-pck" style="background-color:red"></div>
    </div>
  </div>
</div>-->

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
     <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                 <h4 class="modal-title">COLORS</h4>
            </div>      <!-- /modal-header -->
            <div class="modal-body">
              <div class="modal-colors container-fluid">
                <div class="row">
                  <div class="col-xs-4 l-col col-pck" style=";background-color:red"></div>
                  <div class="col-xs-4 m-col col-pck" style="background-color:red"></div>
                  <div class="col-xs-4 r-col col-pck" style="background-color:red"></div>
                </div>
              </div>
            </div>    <!-- /modal-body -->
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>      <!-- /modal-footer -->
        </div>
    </div> <!-- /.modal-dialog -->
</div> <!-- /.modal -->
  <!-- jQuery -->
  <script src="css/jquery.min.js"></script>

  <!-- Bootstrap Core JavaScript -->
  <script src="css/bootstrap.min.js"></script>










<!--cookie functions-->
<script>

function clearCook(){
    $('.colorr').each(function(){
    var id = $(this).attr('id');
    setCookie(id,"",-1);
})
    setCookie('zoneimg',"",-1);
    setCookie('active',"",-1);
  };

function setCookie(cname, cvalue, hrs) {
    var d = new Date();
    d.setTime(d.getTime() + (hrs*60*60*1000));
    var expires = "expires="+ d.toUTCString();
    document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}    

function getCookie(cname) {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for(var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
        }
    }
    return "";
};  

</script>



<!--check to see if colors/zone/activation have been saved-->
<script>
$(document).ready(function(){
  if(getCookie('active')!=""){
    $('#active').html("Ticket activated at "+getCookie('active'));
  }

  if(getCookie('zoneimg')!=""){
    $('#zoneimg').prop('src',getCookie('zoneimg'));
  }
  
  $('.colorr').each(function(){
    var id = $(this).attr('id');
    if (getCookie(id)!=""){
        var oldcol=getCookie(id);
        $(this).css('background-color',oldcol);
    };
  });
  $('.colorr').css('opacity',1)
})

</script>



<!--format time for scrolling letters-->
<script>    
function formatAMPM(date) {
  var hours = date.getHours();
  var minutes = date.getMinutes();
  var secs = date.getSeconds();
  var day= date.getDate();
  var mon = date.getMonth()+1;
  var yr = date.getYear()
  var MS_PER_MINUTE = 60000;
  yr=yr-100
  var ampm = hours >= 12 ? 'PM' : 'AM';

  var start = new Date(date - 14 * MS_PER_MINUTE);
  var shours=start.getHours();
  var smin = start.getMinutes();
  
  shours = shours % 12;
  shours = shours ? shours : 12; // the hour '0' should be '12'
  smin = smin < 10 ? '0'+smin : smin;

  hours = hours % 12;
  hours = hours ? hours : 12; // the hour '0' should be '12'
  minutes = minutes < 10 ? '0'+minutes : minutes;
  secs = secs < 10 ? '0'+secs : secs;
  day = day < 10 ? '0'+day : day;
  mon = mon < 10 ? '0'+mon : mon;
  var strTime = hours + ':' + minutes + ':' +  secs + ' ' + ampm + '<br>' + mon + '/' + day + '/' +yr;
  var startt = shours + ':' + smin + ' ' + ampm ;
  return [strTime,startt];
}
var datetimeNow = new Date();
$("#active").html("Ticket activated at " + formatAMPM(datetimeNow)[1]);
$("#TIME").html(formatAMPM(datetimeNow)[0]);


//refresh time every second
setInterval(function() {
        var datetimeNow = new Date();
        $("#TIME").html(formatAMPM(datetimeNow)[0]);
    }, 1000);

//wait 500ms for time to appear to set the scrolling buffer
setTimeout(function(){
  var witth = $("#MOVE").outerWidth();
  $("#wrapper").css("padding-right", witth+"px");
  $("#TIME").css("opacity",1);
}, 300);
</script>






<!--change zone img on click-->
<script>
var zonetic=0;
var zonesrcs=['1A.png','1.png'];
$('#zone').click(function(){
  $('#zoneimg').prop('src','gfx/'+zonesrcs[zonetic]);
  setCookie('zoneimg',$('#zoneimg').prop('src'),1);
  zonetic++;
  if(zonetic>zonesrcs.length-1){zonetic=0};
}
  )
</script>

<script>
(function($) {
  $.fn.getHexBackgroundColor = function() {
    return (function(rgb) {
      return '#' + (!rgb
        ? 'FFFFFF'
        : rgb.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/)
             .slice(1)
             .map(x => ('0' + parseInt(x).toString(16)).slice(-2))
             .join('')
             .toUpperCase());
    })($(this).css('background-color'));
  }
})(jQuery);



var colsrcs=[
  '#6634B0',
  '#B482B3',
  '#8B4893',
  '#904DC6',
  '#9C74F6',

  '#403EF3',
  '#4E83A6',
  '#69D5BD',



  '#9E9E94',

  '#927F5D',
  '#A59A90',

  '#DECB81',

  '#DF6C4E',
  '#FFBD38',
  '#D28037',
  '#63BF49',
  '#7FEA90',
  '#93F070',

  ];

 //var template ='<div class="row"><div class="col-xs-4 l-col col-pck" style="background-color:red"></div><div class="col-xs-4 m-col col-pck" style="background-color:red"></div><div class="col-xs-4 r-col col-pck" style="background-color:red"></div></div>';

mod = $('.modal-colors');

for (i=0; i<colsrcs.length;i++){
  color=colsrcs[i];
  var newdiv =`<div class="row"><div class="col-xs-4 l-col col-pck" style="background-color:${color}"></div><div class="col-xs-4 m-col col-pck" style="background-color:${color}"></div><div class="col-xs-4 r-col col-pck" style="background-color:${color}"></div></div>`;
    mod.append(newdiv)
  //console.log(newdiv)
};


$('.l-col').click(function(){
  var bgc = $(this).getHexBackgroundColor();
  console.log(`${bgc}`);
  $('#left').css('background-color',bgc);
  setCookie($('#left').attr('id'),`${bgc}`,1);
  $('.l-col').removeClass('acti')
  $(this).addClass('acti')
})

$('.m-col').click(function(){
  var bgc = $(this).getHexBackgroundColor();
  $('#middle').css('background-color',bgc);
  setCookie($('#middle').attr('id'),bgc,1);
  $('.m-col').removeClass('acti')
  $(this).addClass('acti')
})

$('.r-col').click(function(){
  var bgc = $(this).getHexBackgroundColor();
  $('#right').css('background-color',bgc);
  setCookie($('#right').attr('id'),bgc,1);
  $('.r-col').removeClass('acti')
  $(this).addClass('acti')
})


var modal = document.getElementById('myModal');
var modalImg = document.getElementById("img01");
var captionText = document.getElementById("caption");
var span = document.getElementsByClassName("close")[0];
var off = 0
//var $imgs = 
//$('.colorr').click(function() {
  //var a = alert('click')
  //modal.style.display = "block";
  //modalImg.src = this.src;
  //captionText.innerHTML = this.alt;
  //off = ((window.innerWidth - modalImg.width)/2)-50;
  //if (off<0){off=10;}
  //console.log(off);
  //span.style.right = off + "px";
//})

span.onclick = function() { 
   //modal.fadeOut()
   modal.style.display = "none";
   span.style.right ="0px";

}
</script>

<!--change security color on click
<script>
var coltic=0

var colsrcs=[
  '#6634B0',
  '#D28037',
  '#403EF3',
  '#93F070',
  '#9E9E94',
  '#9C74F6',
  '#927F5D',
  '#A59A90',
  '#7FEA90',
  '#8E48C5',
  '#DECB81',
  '#8B4893',
  '#904DC6',
  '#DECB81',
  '#DF6C4E',
  '#63BF49',
  '#B482B3',
  '#FFBD38',
  ];

$('.colorr').click(function(){
  var id = $(this).attr('id');
  var newcolor = colsrcs[coltic];
  $(this).css('background-color',newcolor);
  setCookie(id,newcolor,1);
  coltic++;
  if(coltic>colsrcs.length-1){coltic=0};
}
  )
</script>-->


<!--refresh page buttom-->
<script>
$('#refresh').click(function() {
    location.reload();
});
</script>


<!--set activated time button-->
<script>
$('#active').click(function() {
  var st = prompt("Ticket activated at ", "");
  if (st != null) {
    $('#active').html("Ticket activated at "+st);
    setCookie('active',st,1);
    }
})
</script>

<!--clear cookies button-->
<script>

$('#down-btn').click(function(){
  clearCook();
});
</script>







<!--
<script>
var coltic=0

var colsrcs=[
  'linear-gradient(to right,  #6634B0 0%,#6634B0 33.33%,#D28037 33.33%,#D28037 66.66%,#403EF3 66.66%,#403EF3 100%)',
  'linear-gradient(to right,  #93F070 0%,#93F070 33.33%,#9E9E94 33.33%,#9E9E94 66.66%,#9C74F6 66.66%,#9C74F6 100%)',
  'linear-gradient(to right,  #927F5D 0%,#927F5D 33.33%,#A59A90 33.33%,#A59A90 66.66%,#7FEA90 66.66%,#7FEA90 100%)',
  'linear-gradient(to right,  #8E48C5 0%,#8E48C5 33.33%,#D2F354 33.33%,#D2F354 66.66%,#8B4893 66.66%,#8B4893 100%)',
  'linear-gradient(to right,  #904DC6 0%,#904DC6 33.33%,#DECB81 33.33%,#DECB81 66.66%,#DF6C4E 66.66%,#DF6C4E 100%)',
  'linear-gradient(to right,  #63BF49 0%,#63BF49 33.33%,#B482B3 33.33%,#B482B3 66.66%,#FFBD38 66.66%,#FFBD38 100%)',
  ]

$('#bigwrapper').click(function(){
  $('#colors').css('background',colsrcs[coltic]);
  coltic++;
  if(coltic>colsrcs.length-1){coltic=0};
}
  )
</script>
-->


</body>
</html>
